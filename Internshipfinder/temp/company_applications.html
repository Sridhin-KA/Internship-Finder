<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Applications - Internship Finder</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 font-sans leading-normal tracking-normal">

  <!-- Navbar -->
  <nav class="bg-[#1E3A8A] text-white shadow-md">
    <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
      <h1 class="text-xl font-bold">Internship Finder</h1>
      <div class="space-x-6">
        <a href="../../openintern" class="hover:text-gray-200">Internships</a>
        <a href="{% url 'company_applications' %}" class="hover:text-gray-200 font-semibold border-b-2 border-white">Applications</a>
        <a href="cmplogout" class="hover:text-gray-200">Logout</a>
      </div>
    </div>
  </nav>
<div class="mt-6">
  <a href="../../cmpback"
          class="bg-gray-600 text-white px-5 py-2 rounded-lg hover:bg-gray-700">
    ‚Üê Back
    </a>
</div>

  <!-- Page Content -->
  <section class="max-w-7xl mx-auto px-6 py-10">
    <h2 class="text-3xl font-bold text-gray-800 mb-6">Applications for Your Internships</h2>
    
    <div class="bg-white p-6 rounded-2xl shadow border border-gray-200">
      <table class="w-full border-collapse text-sm">
        <thead>
          <tr class="bg-[#EFF6FF] text-[#1E3A8A] text-left">
            <th class="p-3">Student</th>
            <th class="p-3">Internship</th>
            <th class="p-3">Status</th>
            <th class="p-3">Applied On</th>
            <th class="p-3">Resume</th>
            <th class="p-3">Action</th>
          </tr>
        </thead>
        <tbody>
          {% for app in applications %}
          <tr class="border-t hover:bg-gray-50 transition">
            <td class="p-3 font-medium text-gray-800">{{ app.student.first_name }} {{ app.student.last_name }}</td>
            <td class="p-3 text-gray-700">{{ app.internship.title }}</td>
            <td class="p-3">
              <span class="px-2 py-1 rounded-full text-xs font-semibold
                {% if app.status == 'accepted' %} bg-green-100 text-green-700
                {% elif app.status == 'pending' %} bg-yellow-100 text-yellow-700
                {% elif app.status == 'rejected' %} bg-red-100 text-red-700
                {% else %} bg-gray-100 text-gray-600 {% endif %}
              ">
                {{ app.get_status_display }}
              </span>
            </td>
            <td class="p-3 text-gray-600">{{ app.applied_at|date:"M d, Y H:i" }}</td>
            <td class="p-3">
              {% if app.resume %}
                <a href="{{ app.resume.url }}" target="_blank" class="text-[#2563EB] hover:underline">View</a>
              {% else %}
                <span class="text-gray-400">No Resume</span>
              {% endif %}
            </td>
            <td class="p-3 space-x-2">
              {% if app.status == "pending" %}
                <a href="{% url 'accept_application' app.id %}" class="bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded-lg text-xs shadow">Accept</a>
                <a href="{% url 'reject_application' app.id %}" class="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded-lg text-xs shadow">Reject</a>
              {% else %}
                <span class="text-gray-400 italic">No Action</span>
              {% endif %}
            </td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="6" class="p-6 text-center text-gray-500">No applications yet.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </section>

</body>
</html>
